#!/bin/bash

# Usage: ./empty_cells <filename> <delimiter>

if [ "$#" -ne 2 ]; then
    echo "Usage: $0 <filename> <delimiter>"
    exit 1
fi

file="$1"
delim="$2"

# Convert delimiter to a safe character for AWK (e.g., ; or tab)
awk -v FS="$delim" '
NR==1 {
    for (i = 1; i <= NF; i++) {
        header[i] = $i
        count[i] = 0
    }
    next
}
{
    for (i = 1; i <= NF; i++) {
        if ($i == "") count[i]++
    }
}
END {
    for (i = 1; i <= length(header); i++) {
        printf "%s: %d\n", header[i], count[i]
    }
}
' "$file"
